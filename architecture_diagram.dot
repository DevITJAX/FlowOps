// Architecture Trois Tiers - FlowOps
// Compiler avec: dot -Tpng architecture_diagram.dot -o architecture_diagram.png
// Ou: dot -Tsvg architecture_diagram.dot -o architecture_diagram.svg

digraph ArchitectureTroisTiers {
    // Configuration générale
    graph [
        rankdir=TB
        splines=ortho
        nodesep=0.8
        ranksep=1.0
        bgcolor="white"
        fontname="Arial"
        label=<<B>Architecture Trois Tiers</B>>
        labelloc=t
        fontsize=20
    ]
    
    node [
        shape=box
        style="filled,rounded"
        fontname="Arial"
        fontsize=12
        margin="0.3,0.2"
    ]
    
    edge [
        fontname="Arial"
        fontsize=10
        color="#333333"
    ]
    
    // ===========================================
    // COUCHE PRÉSENTATION
    // ===========================================
    subgraph cluster_presentation {
        label=<<B>Couche Présentation</B>>
        labelloc=t
        style="rounded,filled"
        fillcolor="#E3F2FD"
        color="#1976D2"
        fontcolor="#1976D2"
        fontsize=14
        
        presentation [
            label=<<TABLE BORDER="0" CELLBORDER="0" CELLSPACING="0">
                <TR><TD><B>Présentation</B></TD></TR>
                <TR><TD> </TD></TR>
                <TR><TD>React + Vite + Nginx</TD></TR>
            </TABLE>>
            fillcolor="#BBDEFB"
            color="#1976D2"
        ]
    }
    
    // ===========================================
    // COUCHE MÉTIER
    // ===========================================
    subgraph cluster_metier {
        label=<<B>Couche Métier</B>>
        labelloc=t
        style="rounded,filled"
        fillcolor="#E8F5E9"
        color="#388E3C"
        fontcolor="#388E3C"
        fontsize=14
        
        metier [
            label=<<TABLE BORDER="0" CELLBORDER="0" CELLSPACING="0">
                <TR><TD><B>Métier</B></TD></TR>
                <TR><TD> </TD></TR>
                <TR><TD>Node.js + Express.js</TD></TR>
            </TABLE>>
            fillcolor="#C8E6C9"
            color="#388E3C"
        ]
    }
    
    // ===========================================
    // COUCHE DONNÉES
    // ===========================================
    subgraph cluster_donnees {
        label=<<B>Couche Données</B>>
        labelloc=t
        style="rounded,filled"
        fillcolor="#FFF3E0"
        color="#F57C00"
        fontcolor="#F57C00"
        fontsize=14
        
        donnees [
            label=<<TABLE BORDER="0" CELLBORDER="0" CELLSPACING="0">
                <TR><TD><B>Données</B></TD></TR>
                <TR><TD> </TD></TR>
                <TR><TD>Azure Cosmos DB (MongoDB)</TD></TR>
            </TABLE>>
            fillcolor="#FFE0B2"
            color="#F57C00"
            shape=cylinder
        ]
    }
    
    // ===========================================
    // CONNEXIONS
    // ===========================================
    presentation -> metier [
        label="  HTTPS / REST API  "
        dir=both
        style=bold
        color="#1976D2"
        fontcolor="#1976D2"
    ]
    
    metier -> donnees [
        label="  MongoDB Protocol  "
        dir=both
        style=bold
        color="#388E3C"
        fontcolor="#388E3C"
    ]
}
